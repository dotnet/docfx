# Source Path

In `.publish.json file`,`source_path` represents the source file's relative path to docset root.

It will be used in PR comments to indicate the path of the files containing errors/warnings/suggestions.


# Design of SourceMap

For most cases, the same source_path corresponds to the same source file (i.e. One-To-One). And the source_path value is the source file's physical file path.

For some special cases, it is allowed to config mappings to resolve source_path values, named **SourceMap**  

|  key             |  Value            |
|------------------|-------------------|
| source file path | source_path value |

Due to **SourceMap**, multiple source files may have the same source_path (i.e. **Many-To-One**). And the source_path value may be NOT equal to the source file's physical file path.

## Usage Examples

For non-standard yml files or markdown files (e.g. MonoDocXml, MAML files), before executing DocFX build, **OpsPreProcessor** will pre-process the raw files.
And multiple standard yml files may be generated for single raw file.   
And **SourceMap**s will be auto generated by **OpsPreProcessor** to record the mapping relationship between raw files and generated yml files.



# Source Path Complement

**Requirement**:   
In localization pipeline, the generated files will be localized separately.   

**Challenge**:   
It is not possible to distinguish published files via the source_path value due to **SourceMap** design for dotnet language repos (use MonoDocXML as source format).

**Design**:    
Add complement for source_path, i.e. add new property in .publish.json named `source_path_complement` for those entries containing the same `source_path` values.


```json
  .publish.json: |
    {
          "files": [
        {
            "url": "/api/catlibrary.cat-2",
            "source_path": "xml/CatLibrary/Cat`2.xml",
            "source_path_complement": "api/CatLibrary.Cat-2.yml",            
        },     
        {
            "url": "/api/catlibrary.cat-2.-ctor",            
            "source_path": "xml/CatLibrary/Cat`2.xml",
            "source_path_complement": "api/CatLibrary.Cat-2.-ctor.yml",           
        }
    }
```

The values of `source_path_complement` are actually the values of the source file's file path (the generated standard yaml files in MonoDocXML case)

**Note**: For those files not in **SourceMap**, the `source_path_complement` is null (i.e. not exist in .publish.json) because they don't need the complement.  
It is consistent and safe to construct a unique id by author code like  
```csharp
var uid = item.SourcePath + item.SourcePathComplement ?? "";
```
