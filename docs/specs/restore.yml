---
# Restore dependencies with their children
inputs:
  docfx.yml: |
    dependencies:
      docfx-test-dependencies1: https://github.com/docascode/docfx-test-dependencies
      docfx-test-dependencies2: https://github.com/docascode/docfx-test-dependencies
restores:
  git/github.com/docascode/docfx-test-dependencies/9ab39126f6d6642131084e741ca6206989db505a/dep.md: DEP
  git/github.com/docascode/docfx-test-dependencies/5736374c0a142252063bbedafe5d98db495e263d/dep.md: child-DEP
  restore-lock/*Restore dependencies with their children-*-lock.json: |
    {"git":{"https://github.com/docascode/docfx-test-dependencies":"9ab39126f6d6642131084e741ca6206989db505a"}}
  restore-lock/9ab39126f6d6642131084e741ca6206989db505a-*-lock.json: |
    {"git":{"https://github.com/docascode/docfx-test-dependencies#child":"5736374c0a142252063bbedafe5d98db495e263d"}}
outputs:
  build.manifest:
---
# Restore urls
inputs:
  docfx.yml: |
    contribution:
      gitCommitsTime: https://raw.githubusercontent.com/docascode/docfx-test-dependencies/git-test-3/build_history.json
restores:
  url/raw.githubusercontent.com/docascode/docfx-test-dependencies/git-test-3/build_history.json/bc49cd50f70f1cf1cfc00b7bcd241e63a70ba53b: |
    {
      "commits": [
        {
          "sha": "ba823dc527860ca0a5d7844fd80c9824dd993170",
          "built_at": "1874-01-01"
        }
      ]
    }
  restore-lock/*Restore urls-*-lock.json: |
    {"url":{"https://raw.githubusercontent.com/docascode/docfx-test-dependencies/git-test-3/build_history.json":"bc49cd50f70f1cf1cfc00b7bcd241e63a70ba53b"}}
outputs:
  build.manifest:
---
# Restore urls with extends
inputs:
  docfx.yml: |
    extend: https://raw.githubusercontent.com/docascode/docfx-test-dependencies/extend-test-1/extend2.yml
restores:
  url/raw.githubusercontent.com/docascode/docfx-test-dependencies/git-test-3/build_history.json/bc49cd50f70f1cf1cfc00b7bcd241e63a70ba53b: |
    {
      "commits": [
        {
          "sha": "ba823dc527860ca0a5d7844fd80c9824dd993170",
          "built_at": "1874-01-01"
        }
      ]
    }
  restore-lock/*Restore urls with extends-*-lock.json: |
    {"url":{"https://raw.githubusercontent.com/docascode/docfx-test-dependencies/git-test-3/build_history.json":"bc49cd50f70f1cf1cfc00b7bcd241e63a70ba53b"}}
outputs:
  build.manifest:
---
# Restore dependencies with extends
inputs:
  docfx.yml: |
    extend: https://raw.githubusercontent.com/docascode/docfx-test-dependencies/extend-test-1/extend3.yml
restores:
  git/github.com/docascode/docfx-test-dependencies/9ab39126f6d6642131084e741ca6206989db505a/dep.md: DEP
  git/github.com/docascode/docfx-test-dependencies/5736374c0a142252063bbedafe5d98db495e263d/dep.md: child-DEP
  restore-lock/*Restore dependencies with extends-*-lock.json: |
    {"git":{"https://github.com/docascode/docfx-test-dependencies":"9ab39126f6d6642131084e741ca6206989db505a"}}
  restore-lock/9ab39126f6d6642131084e741ca6206989db505a-*-lock.json: |
    {"git":{"https://github.com/docascode/docfx-test-dependencies#child":"5736374c0a142252063bbedafe5d98db495e263d"}}
outputs:
  build.manifest:
---
# Restore loc repo with dependencies
commands:
  - restore --locale zh-cn
  - build
repo: https://github.com/docascode/docfx-test-dependencies#master
restores:
  git/github.com/docascode/docfx-test-dependencies.zh-cn/1dc2455be4a78b4fd29b5641e6fb8d687f37464a/dep.md: loc-DEP
  git/github.com/docascode/docfx-test-dependencies/5736374c0a142252063bbedafe5d98db495e263d/dep.md: child-DEP
  restore-lock/*Restore loc repo with dependencies-*-lock.json: |
    {"git":{"https://github.com/docascode/docfx-test-dependencies.zh-cn#master":"1dc2455be4a78b4fd29b5641e6fb8d687f37464a", "https://github.com/docascode/docfx-test-dependencies#child":"5736374c0a142252063bbedafe5d98db495e263d"}}
  restore-lock/1dc2455be4a78b4fd29b5641e6fb8d687f37464a-*-lock.json: |
    {"git":{"https://github.com/docascode/docfx-test-dependencies#child":"5736374c0a142252063bbedafe5d98db495e263d"}}
outputs:
  build.manifest:
---
# Show error when download failed
inputs:
  docfx.yml: |
    extend: https://this-url-does-not-exit.com/this-is-a-bad-url
outputs:
  build.log: |
    ["error","download-failed","Download 'https://this-url-does-not-exit.com/this-is-a-bad-url' failed: *"]
---
# Show error when git clone failed
inputs:
  docfx.yml: |
    dependencies:
      error: https://github.com/docascode/docfx-test-dependencies#bad-branch
outputs:
  build.log: |
    ["error","git-clone-failed","Cloning git repository 'https://github.com/docascode/docfx-test-dependencies#bad-branch' failed."]
---
# Show error when dependent repo can't be found
commands:
  - build
inputs:
  docfx.yml: |
    dependencies:
      dep: https://github.com/docascode/docfx-test-dependencies#bad-branch
outputs:
  build.log: |
    ["error","need-restore","Cannot find dependency 'https://github.com/docascode/docfx-test-dependencies#bad-branch', did you forget to run `docfx restore`?"]
---
# Show error when dependent URL can't be found
commands:
  - build
inputs:
  docfx.yml: |
    contribution:
      gitCommitsTime: https://docs.microsoft.com/bad-url
outputs:
  build.log: |
    ["error","need-restore","Cannot find dependency 'https://docs.microsoft.com/bad-url', did you forget to run `docfx restore`?"]
---
# Show error when dependent file can't be found
commands:
  - build
inputs:
  docfx.yml: |
    contribution:
      gitCommitsTime: a.json
outputs:
  build.log: |
    ["error","file-not-found","*"]
---
# Restore longpath repo
inputs:
  docfx.yml: |
    dependencies:
      dep: https://github.com/docascode/docfx-test-dependencies#restore/long-path
  docs/test.md: 
    "[!INCLUDE[](~/dep/for-long-path-file-test-for-long-path-file-test-for-long-path-file-test-for-long-path-\
    file-test-for-long-path-file-test-for-long-path-file-test-for-long-path-file-test-for-long-path-file-tes\
    t-for-l/for-long-path-file-test-for-long-path-file-test-for-long-path-file-test-for-long-path-file-test-\
    for-long-path-file-test-for-long-path-file-test-for-long-path-file-test-for-long-path-file-test-for-long\
    -path-file-test-for-long-path-file-test-fo/for-long-path-test.md)]"
outputs:
  docs/test.json: |
    {
      "content": "<p>for long file path test.</p>"
    }
  build.manifest:
