---
# Show git contribution info when userProfile & commitsTime is set to URL
repo: https://github.com/docascode/docfx-test-dependencies#git-profile-time-url
outputs:
  README.json: |
    {
      "author": {
        "name": "superyyrrzz",
        "profileUrl": "https://github.com/superyyrrzz",
        "displayName": "Renze Yu",
        "id": "3831744"
      },
      "contributors": [
        {
          "name": "yufeih",
          "profileUrl": "https://github.com/yufeih",
          "displayName": "Yufei Huang",
          "id": "511355"
        },
        {
          "name": "OsmondJiang",
          "profileUrl": "https://github.com/OsmondJiang",
          "displayName": "Osmond Jiang",
          "id": "19990166"
        }
      ],
      "updatedAt": "1874-01-01T00:00:00.0000000"
    }
  build.manifest:
---
# Show git contribution info when userProfile & commitsTime is set to relative file path
repo: https://github.com/docascode/docfx-test-dependencies#git-profile-time-file
outputs:
  README.json: |
    {
      "author": {
        "name": "superyyrrzz",
        "profileUrl": "https://github.com/superyyrrzz",
        "displayName": "Renze Yu",
        "id": "3831744"
      },
      "contributors": [
        {
          "name": "yufeih",
          "profileUrl": "https://github.com/yufeih",
          "displayName": "Yufei Huang",
          "id": "511355"
        },
        {
          "name": "OsmondJiang",
          "profileUrl": "https://github.com/OsmondJiang",
          "displayName": "Osmond Jiang",
          "id": "19990166"
        }
      ],
      "updatedAt": "1874-01-01T00:00:00.0000000"
    }
  build.manifest:
---
# Specify invalid author in YAML header should log warning
# The warning message for author-not-found can one of the following:
# - Author 'invalid_user' cannot be recognized: User not found on GitHub
# - Author 'invalid_user' cannot be recognized: GitHub API rate limit exceeded
repo: https://github.com/docascode/docfx-test-dependencies#git-test-3
outputs:
  README.json:
  testdata1.json:
  build.manifest:
  dep.json:
  build.log: |
    ["warning","author-not-found","*","README.md"]
---
# Author should also exist in contributors, even hasn't contributed to the file before
repo: https://github.com/docascode/docfx-test-dependencies#git-test-4
outputs:
  README.json: |
    {
      "author":  {
        "name": "yufeih",
        "profileUrl": "https://github.com/yufeih",
        "displayName": "Yufei Huang",
        "id": "511355"
      },
      "contributors": [
        {
          "name": "superyyrrzz",
          "profileUrl": "https://github.com/superyyrrzz",
          "displayName": "Renze Yu",
          "id": "3831744"
        },
        {
          "name": "OsmondJiang",
          "profileUrl": "https://github.com/OsmondJiang",
          "displayName": "Osmond Jiang",
          "id": "19990166"
        }
      ],
    }
  testdata1.json:
  build.manifest:
  dep.json:
---
# Contributors can be excluded, it's case insensitive
repo: https://github.com/docascode/docfx-test-dependencies#git-test-4
inputs:
  docfx.yml: |
    name: docfx-git-test
    content: "*.md"
    contribution:
      userProfileCache: https://raw.githubusercontent.com/docascode/docfx-test-dependencies/git-test-4/user_profile.json
      repository: https://gitlab.com/test-org/test-repo
      branch: contribution
      excludedContributors:
        - superyyrrZZ
outputs:
  README.json: |
    {
      "author":  {
        "name": "yufeih",
        "profileUrl": "https://github.com/yufeih",
        "displayName": "Yufei Huang",
        "id": "511355"
      },
      "contributors": [
        {
          "name": "OsmondJiang",
          "profileUrl": "https://github.com/OsmondJiang",
          "displayName": "Osmond Jiang",
          "id": "19990166"
        }
      ],
    }
  testdata1.json:
  build.manifest:
  dep.json:
---
# Author can be excluded, it's case insensitive
repo: https://github.com/docascode/docfx-test-dependencies#git-test-4
inputs:
  docfx.yml: |
    name: docfx-git-test
    content: "*.md"
    contribution:
      userProfileCache: https://raw.githubusercontent.com/docascode/docfx-test-dependencies/git-test-4/user_profile.json
      repository: https://gitlab.com/test-org/test-repo
      branch: contribution
      excludedContributors:
        - YUFEIH
outputs:
  README.json: |
    {
      "!author": null,
      "contributors": [
        {
          "name": "superyyrrzz",
          "profileUrl": "https://github.com/superyyrrzz",
          "displayName": "Renze Yu",
          "id": "3831744"
        },
        {
          "name": "OsmondJiang",
          "profileUrl": "https://github.com/OsmondJiang",
          "displayName": "Osmond Jiang",
          "id": "19990166"
        }
      ],
    }
  testdata1.json:
  build.manifest:
  dep.json:
---
# Show editUrl, contentUrl and commitUrl
repo: https://github.com/docascode/docfx-test-dependencies#git-test-6
outputs:
  README.json: |
    {
      "showEdit": true,
      "editUrl": "https://github.com/docascode/docfx-test-dependencies/blob/git-test-6/README.md",
      "contentUrl": "https://github.com/docascode/docfx-test-dependencies/blob/git-test-6/README.md",
      "commitUrl": "https://github.com/docascode/docfx-test-dependencies/blob/8d9f4c8426ce28f4a98ddc8dbc88073210048cfc/README.md",
    }
  testdata1.json: |
    {
      "showEdit": true,
      "editUrl": "https://github.com/docascode/docfx-test-dependencies/blob/git-test-6/testdata1.md",
      "contentUrl": "https://github.com/docascode/docfx-test-dependencies/blob/git-test-6/testdata1.md",
      "commitUrl": "https://github.com/docascode/docfx-test-dependencies/blob/ba823dc527860ca0a5d7844fd80c9824dd993170/testdata1.md",
    }
  dep.json:
  build.manifest:
---
# Specify editLink repo and branch in config
repo: https://github.com/docascode/docfx-test-dependencies#git-test-config-repo-branch
outputs:
  README.json: |
    {
      "editUrl": "https://github.com/test-org/test-repo/blob/contribution/README.md",
      "contentUrl": "https://github.com/docascode/docfx-test-dependencies/blob/git-test-config-repo-branch/README.md",
      "commitUrl": "https://github.com/docascode/docfx-test-dependencies/blob/6119d37731a8c25058bcf85defdb4c9a09d6b404/README.md"
    }
  testdata1.json:
  build.manifest:
  dep.json:
---
# Don't load git commits when showContributors is set to false
repo: https://github.com/docascode/docfx-test-dependencies#git-no-contributors
outputs:
  README.json: |
    {
      "contributors": [],
      "commitUrl": "https://github.com/docascode/docfx-test-dependencies/blob/c877f1eb84e4a3bd8a8a421b14f684c4f0de853d/README.md"
    }
  build.manifest:
---
# Use commit's time when gitCommitsTime file not given
repo: https://github.com/docascode/docfx-test-dependencies#git-test-4
outputs:
  README.json: |
    {
      "updatedAt": "2018-07-03T05:41:26",
    }
  testdata1.json:
  build.manifest:
  dep.json:
---
# Support git submodule
repo: https://github.com/docascode/docfx-test-dependencies#docset-with-submodule
outputs:
  README.json: |
    {
      "commitUrl": "https://github.com/docascode/docfx-test-dependencies/blob/c467c848311ccd2550fdb25a77ef26f9d8a33d00/README.md",
      "updatedAt": "2018-04-23T03:23:37Z"
    }
  docfx-test-submodule/README.json: |
    {
      "commitUrl": "https://github.com/docascode/docfx-test-submodule/blob/b6601c200859547c7fcd44a44788f77a08576505/README.md",
      "updatedAt": "2018-07-18T05:03:26Z"
    }
  build.manifest:
---
