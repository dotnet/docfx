---
# Basic lsp test
os: windows
inputs:
  docfx.yml:
languageServer:
  - openFiles:
      a.md: "# Heading\nInvalid Link [B](b.md)"
  - expectDiagnostics:
      a.md:
      - range:
          start: { "line": 1, "character": 13 }
          end: { "line": 1, "character": 13 }
        severity: 2
        code: file-not-found
        source: Docs Validation
        message: "Invalid file link: 'b.md'."
  - editFiles:
      a.md: New Content
  - expectDiagnostics:
      a.md: []
---
# Multiple docsets
os: windows
inputs:
  docsets.yml:
  a/docfx.yml:
  a/a.md:
  a/b.md:
  b/docfx.yml:
  b/a.md:
  b/b.md:
languageServer:
  - openFiles:
      a/a.md: "[Test](non-existed.md)"
  - expectDiagnostics:
      a/a.md: [{ "code": "file-not-found", "message": "Invalid file link: 'non-existed.md'."}]
---
# All the opened file should be built in a build round
os: windows
inputs:
  docfx.yml:
  a.md:
  b.md:
languageServer:
  - openFiles:
      a.md: "[Test](non-existed.md)"
  - expectDiagnostics: 
      a.md: [{ "code": "file-not-found" }]
  - openFiles:
      b.md: "[Test](non-existed.md)"
  - expectDiagnostics: 
      a.md: [{ "code": "file-not-found" }]
      b.md: [{ "code": "file-not-found" }]
---
# Open/Change of files out of current repo should not trigger build
os: windows
inputs:
  docfx.yml:
  a.md:
languageServer:
  - openFiles:
      a.md: "[Test](non-existed.md)"
  - expectDiagnostics: 
      a.md: [{ "code": "file-not-found" }]
  - openFiles:
      '../a.md': "Invalid change"
  - expectNoNotification: true
