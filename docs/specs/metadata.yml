# generate normal document id and version id
# backward compatible to docs.com
# document id = md5("Win.sccm|mdt/release-notes.md")
# version independent id = md5("Win.sccm|mdt/release-notes")
inputs:
  docfx.yml: |
    documentId:
      sourceBasePath: sccm
      siteBasePath: sccm
    name: sccm
    product: Win
    content: sccm/**/*
  sccm/mdt/release-notes.md:
outputs:
  sccm/mdt/release-notes.json: |
    { "content": "", "id": "0b1c8a5d-b639-d555-0850-b98a9010023c", "versionIndependentId": "b20fdb1c-8d40-c3b2-2265-779a3f2dfe98" }
  build.manifest:
---
# generate index document id and version id
# backward compatible to docs.com
# document id = md5("Win.sccm|index.md") || md5("Win.sccm|mdm/index.md")
# version independent id = md5("Win.sccm|index") || md5("Win.sccm|mdm/index")
inputs:
  docfx.yml: |
    documentId:
      sourceBasePath: sccm
      siteBasePath: sccm
    name: sccm
    product: Win
    content: "**/*"
  sccm/mdm/index.md:
  sccm/index.md:
outputs:
  sccm/index.json: |
    { "content": "", "id": "29602e3e-439e-865c-f1c9-2eb706f97b31", "versionIndependentId": "34196fc5-28d6-b496-a21f-8661876802c7" }
  sccm/mdm/index.json: |
    { "content": "", "id": "1c42a151-6248-df0c-15e6-3b1158d7bee3", "versionIndependentId": "beb14a44-b076-14b8-b9c5-b42f9e36b973" }
  build.manifest:
---
# generate same document id and version id with 'redirection with document id'
# A => B, B's ids should be same with A's
inputs:
  docfx.yml: |
    documentId:
      sourceBasePath: sccm
      siteBasePath: sccm
    name: sccm
    product: Win
    content: "**/*"
    redirections:
      sccm/mdm/index.md: /sccm/mdm/understand/hybrid-mobile-device-management
  sccm/mdm/understand/hybrid-mobile-device-management.md:
outputs:
  sccm/mdm/understand/hybrid-mobile-device-management.json: |
    { "id": "1c42a151-6248-df0c-15e6-3b1158d7bee3", "versionIndependentId": "beb14a44-b076-14b8-b9c5-b42f9e36b973" }
  sccm/mdm/index.json: |
    { "redirectionUrl":"/sccm/mdm/understand/hybrid-mobile-device-management", "id": "1c42a151-6248-df0c-15e6-3b1158d7bee3", "versionIndependentId": "beb14a44-b076-14b8-b9c5-b42f9e36b973" }
  build.manifest:
---
# generate different document id and version id with 'redirection without document id'
inputs:
  docfx.yml: |
    documentId:
      sourceBasePath: sccm
      siteBasePath: sccm
    name: sccm
    product: Win
    content: "**/*"
    redirectionsWithoutDocumentId:
      sccm/mdm/index.md: /sccm/mdm/understand/hybrid-mobile-device-management
  sccm/mdm/understand/hybrid-mobile-device-management.md:
outputs:
  sccm/mdm/understand/hybrid-mobile-device-management.json: |
    { "id": "7412621b-4920-dc7e-bed6-1f1ea774f7dd", "versionIndependentId": "de5d1641-2c0e-1158-7611-e52a22d96a5e" }
  sccm/mdm/index.json: |
    { "redirectionUrl":"/sccm/mdm/understand/hybrid-mobile-device-management", "id": "1c42a151-6248-df0c-15e6-3b1158d7bee3", "versionIndependentId": "beb14a44-b076-14b8-b9c5-b42f9e36b973" }
  build.manifest:
---
# get conflicted redirection document id warning if two or more files redirect to the same file with document id
inputs:
  docfx.yml: |
    documentId:
      sourceBasePath: sccm
      siteBasePath: sccm
    name: sccm
    product: Win
    content: "**/*"
    redirections:
      sccm/mdm/index.md: /sccm/mdm/understand/hybrid-mobile-device-management
      sccm/mdm/index2.md: /sccm/mdm/understand/hybrid-mobile-device-management
  sccm/mdm/understand/hybrid-mobile-device-management.md:
outputs:
  sccm/mdm/understand/hybrid-mobile-device-management.json: |
    { "id": "1c42a151-6248-df0c-15e6-3b1158d7bee3", "versionIndependentId": "beb14a44-b076-14b8-b9c5-b42f9e36b973" }
  sccm/mdm/index.json: |
    { "redirectionUrl":"/sccm/mdm/understand/hybrid-mobile-device-management", "id": "1c42a151-6248-df0c-15e6-3b1158d7bee3", "versionIndependentId": "beb14a44-b076-14b8-b9c5-b42f9e36b973" }
  sccm/mdm/index2.json: |
    { "redirectionUrl":"/sccm/mdm/understand/hybrid-mobile-device-management", "id": "573a60b3-e1f9-c2a1-6d92-47f36b55d89b", "versionIndependentId": "b0cc90bf-c553-6b04-e613-57559503e93c" }
  build.manifest:
  build.log: |
    ["warning","redirected-id-conflict","Multiple documents 'sccm/mdm/index.md', 'sccm/mdm/index2.md' redirect to 'sccm/mdm/understand/hybrid-mobile-device-management.md' with document id","sccm/mdm/understand/hybrid-mobile-device-management.md"]
